/* Base reset and layout */
* { margin: 0; padding: 0; box-sizing: border-box; }
/* 悬浮按钮容器样式 */
.floating-buttons-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 10;
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: flex-end;
}

/* 悬浮按钮组样式 */
.floating-buttons {
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: flex-end;
    transition: all 0.3s ease;
}

/* 折叠按钮样式 */
.toggle-btn {
    background-color: #e74c3c;
    transform: rotate(0deg);
    transition: transform 0.3s ease;
}

.toggle-btn:hover {
    background-color: #c0392b;
}

/* 折叠状态样式 */
.floating-buttons.collapsed {
    transform: scale(0);
    opacity: 0;
    height: 0;
    overflow: hidden;
}

.toggle-btn.collapsed {
    transform: rotate(180deg);
}

/* 暗色主题下的折叠按钮 */
body.dark-theme .toggle-btn {
    background-color: #c0392b;
}

body.dark-theme .toggle-btn:hover {
    background-color: #e74c3c;
}

.floating-btn {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: #3498db;
    color: white;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
}

.floating-btn:hover {
    background-color: #2980b9;
    transform: scale(1.05);
    box-shadow: 0 6px 12px rgba(0,0,0,0.3);
}

/* 布局切换菜单样式 */
.layout-menu {
    position: absolute;
    bottom: 60px;
    right: 0;
    background: rgba(255,255,255,0.98);
    border: 1px solid rgba(0,0,0,0.08);
    border-radius: 8px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    padding: 8px;
    min-width: 140px;
    z-index: 15;
}

.layout-menu button {
    width: 100%;
    margin-bottom: 6px;
    text-align: left;
}

.layout-menu button:last-child {
    margin-bottom: 0;
}

/* 搜索菜单样式 */
.search-menu {
  position: absolute;
  bottom: 60px;
  right: 0;
  background: rgba(255,255,255,0.98);
  border: 1px solid rgba(0,0,0,0.08);
  border-radius: 8px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  padding: 8px;
  min-width: 200px;
  z-index: 1000;
}

/* 类型切换菜单样式 */
.type-menu {
  position: absolute;
  bottom: 60px;
  right: 0;
  background: rgba(255,255,255,0.98);
  border: 1px solid rgba(0,0,0,0.08);
  border-radius: 8px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  padding: 8px;
  min-width: 140px;
  z-index: 1000;
}

.type-menu button {
  width: 100%;
  margin-bottom: 6px;
  text-align: left;
}

.type-menu button:last-child {
  margin-bottom: 0;
}

/* 搜索建议列表 */
#searchSuggestions {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  border: 1px solid #ddd;
  border-top: none;
  border-radius: 0 0 4px 4px;
  max-height: 200px;
  overflow-y: auto;
  z-index: 1000;
  display: none;
  background: white;
  color: #333;
}

/* 搜索建议项 */
#searchSuggestions .suggest-item {
  padding: 6px 8px;
  cursor: pointer;
  color: inherit;
}

#searchSuggestions .suggest-item:hover {
  background: #f5f5f5;
}

/* 暗色主题下的悬浮按钮样式 */
body.dark-theme .floating-btn {
  background-color: #2c3e50;
  color: white;
}

body.dark-theme .floating-btn:hover {
  background-color: #34495e;
}

/* 暗色主题下的布局菜单 */
body.dark-theme .layout-menu {
  background: rgba(44, 62, 80, 0.95);
  border-color: rgba(255, 255, 255, 0.1);
  color: #ecf0f1;
}

/* 暗色主题下的搜索菜单 */
body.dark-theme .search-menu {
  background: rgba(47,47,47,0.95);
  border: 1px solid rgba(255,255,255,0.1);
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  color: #ecf0f1;
}

body.dark-theme .search-menu input,
body.dark-theme .search-menu select {
  background: rgba(52, 73, 94, 0.8);
  border-color: rgba(255, 255, 255, 0.2);
  color: #ecf0f1;
}

/* 暗色主题下的类型菜单 */
body.dark-theme .type-menu {
  background: rgba(44, 62, 80, 0.95);
  border-color: rgba(255, 255, 255, 0.1);
  color: #ecf0f1;
}

/* 暗色主题下的搜索建议列表 */
body.dark-theme #searchSuggestions {
  background: #2f2f2f !important;
  color: #e0e0e0 !important;
  border-color: #666 !important;
}

body.dark-theme #searchSuggestions .suggest-item:hover {
  background: #3a3a3a;
}

/* 暗色主题下的类型菜单 */
body.dark-theme .type-menu {
    background: rgba(44, 62, 80, 0.95);
    border-color: rgba(255, 255, 255, 0.1);
    color: #ecf0f1;
}

/* 暗色主题下的数据管理面板 */
body.dark-theme .dm-panel {
    background: rgba(44, 62, 80, 0.95);
    color: #ecf0f1;
}

body.dark-theme .dm-panel button {
    background-color: #3498db;
    color: white;
}

body.dark-theme .dm-panel button:hover {
    background-color: #2980b9;
}

/* 原有样式保持不变 */
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f5f5f5; color: #333; height: 100vh; overflow: hidden; }
body.dark-theme { background-color: #1a1a1a; color: #e0e0e0; }
.container { display: flex; height: 100vh; }

/* Control panel */
.control-panel { width: 300px; background-color: #fff; padding: 20px; border-right: 1px solid #ddd; overflow-y: auto; z-index: 10; }
body.dark-theme .control-panel { background-color: #2d2d2d; border-right: 1px solid #444; }
.control-panel h2 { margin-bottom: 20px; text-align: center; color: #2c3e50; }
body.dark-theme .control-panel h2 { color: #ecf0f1; }
.control-group { margin-bottom: 20px; }
.control-group h3 { margin-bottom: 10px; font-size: 16px; color: #34495e; }
body.dark-theme .control-group h3 { color: #bdc3c7; }
.control-item { margin-bottom: 10px; }
label { display: block; margin-bottom: 5px; font-size: 14px; }
input, select, button { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; background-color: #fff; }
body.dark-theme input, body.dark-theme select, body.dark-theme button { background-color: #3d3d3d; border: 1px solid #555; color: #e0e0e0; }
button { cursor: pointer; background-color: #3498db; color: #fff; border: none; padding: 10px; margin: 5px 0; transition: background-color 0.3s; }
button:hover { background-color: #2980b9; }
body.dark-theme button { background-color: #2980b9; }
body.dark-theme button:hover { background-color: #3498db; }

/* Graph container */
#cy { width: 100%; height: 100%; z-index: 1; }

/* Stats panel */
.stats-panel { position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.9); padding: 15px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); max-width: 300px; z-index: 10; }
body.dark-theme .stats-panel { background: rgba(45,45,45,0.95); box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
.stats-panel h3 { margin-bottom: 10px; font-size: 16px; }
.stats-list { max-height: 300px; overflow-y: auto; }
.stat-item { display: flex; justify-content: space-between; padding: 5px 0; font-size: 14px; }

/* Tooltip */
#tooltip { position: absolute; background: rgba(0,0,0,0.8); color: #fff; padding: 10px; border-radius: 4px; font-size: 14px; z-index: 1000; pointer-events: none; display: none; max-width: 300px; }

/* Sidebar */
.sidebar { position: absolute; top: 0; right: 0; width: 350px; height: 100%; background: rgba(255,255,255,0.95); padding: 20px; overflow-y: auto; z-index: 12; border-left: 1px solid #ddd; transform: translateX(100%); transition: transform 0.3s ease; }
body.dark-theme .sidebar { background: rgba(45,45,45,0.95); border-left: 1px solid #444; }
.sidebar { display: none; }
.sidebar.active { transform: translateX(0); }
.sidebar h3 { margin-bottom: 15px; }

/* Legend */
.legend { position: absolute; bottom: 20px; left: 20px; background: rgba(255,255,255,0.9); padding: 15px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); z-index: 5; }
body.dark-theme .legend { background: rgba(45,45,45,0.95); box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
.legend-item { display: flex; align-items: center; margin-bottom: 8px; }
.legend-color { width: 20px; height: 20px; border-radius: 3px; margin-right: 10px; }

/* Toolbar */
.toolbar { position: absolute; top: 20px; left: 320px; z-index: 5; display: flex; gap: 10px; background: rgba(255,255,255,0.9); padding: 10px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
body.dark-theme .toolbar { background: rgba(45,45,45,0.95); box-shadow: 0 4px 12px rgba(0,0,0,0.3); }

/* Theme toggle */
.theme-toggle { position: absolute; top: 20px; left: 20px; z-index: 5; }

/* Inputs */
#fileInput { display: none; }
.highlight-btn { background-color: #e74c3c !important; }
.highlight-btn:hover { background-color: #c0392b !important; }
.normal-btn { background-color: #3498db !important; }
.normal-btn:hover { background-color: #2980b9 !important; }

/* Toast */
.toast { position: fixed; bottom: 20px; left: 20px; background: rgba(0,0,0,0.8); color: #fff; padding: 10px 14px; border-radius: 6px; z-index: 200; display: none; }

/* Migrated inline styles */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            height: 100vh;
            overflow: hidden;
        }
        
        body.dark-theme {
            background-color: #1a1a1a;
            color: #e0e0e0;
        }
        
        .container {
            display: flex;
            height: 100vh;
        }
        
        /* 控制面板样式 */
        .control-panel {
            width: 300px;
            background-color: #fff;
            padding: 20px;
            border-right: 1px solid #ddd;
            overflow-y: auto;
            z-index: 10;
        }
        
        body.dark-theme .control-panel {
            background-color: #2d2d2d;
            border-right: 1px solid #444;
        }
        
        .control-panel h2 {
            margin-bottom: 20px;
            text-align: center;
            color: #2c3e50;
        }
        
        body.dark-theme .control-panel h2 {
            color: #ecf0f1;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        .control-group h3 {
            margin-bottom: 10px;
            font-size: 16px;
            color: #34495e;
        }
        
        body.dark-theme .control-group h3 {
            color: #bdc3c7;
        }
        
        .control-item {
            margin-bottom: 10px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        input, select, button {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #fff;
        }
        
        body.dark-theme input,
        body.dark-theme select,
        body.dark-theme button {
            background-color: #3d3d3d;
            border: 1px solid #555;
            color: #e0e0e0;
        }
        
        button {
            cursor: pointer;
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px;
            margin: 5px 0;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        body.dark-theme button {
            background-color: #2980b9;
        }
        
        body.dark-theme button:hover {
            background-color: #3498db;
        }
        
        /* 图表容器样式 */
        .graph-container {
            flex: 1;
            position: relative;
        }
        
        #cy {
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        /* 统计面板样式 */
        .stats-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            max-width: 300px;
            z-index: 5;
        }
        
        body.dark-theme .stats-panel {
            background: rgba(45, 45, 45, 0.95);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .stats-panel h3 {
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .stats-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            font-size: 14px;
        }
        
        /* 工具提示样式 */
        #tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 4px;
            font-size: 14px;
            z-index: 100;
            pointer-events: none;
            display: none;
            max-width: 300px;
        }
        
        /* 侧栏详情样式 */
        .sidebar {
            position: absolute;
            top: 0;
            right: 0;
            width: 350px;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            overflow-y: auto;
            z-index: 6;
            border-left: 1px solid #ddd;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        body.dark-theme .sidebar {
            background: rgba(45, 45, 45, 0.95);
            border-left: 1px solid #444;
        }
        
        .sidebar.active {
            transform: translateX(0);
        }
        
        .sidebar h3 {
            margin-bottom: 15px;
        }
        
        /* 图例样式 */
        .legend {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 5;
        }
        
        body.dark-theme .legend {
            background: rgba(45, 45, 45, 0.95);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
            margin-right: 10px;
        }
        
        /* 顶部工具栏 */
        .toolbar {
            position: absolute;
            top: 20px;
            left: 320px; /* Account for control panel width */
            z-index: 5;
            display: flex;
            gap: 10px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        body.dark-theme .toolbar {
            background: rgba(45, 45, 45, 0.95);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        /* 主题切换 */
        .theme-toggle {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 5;
        }
        
        /* 隐藏文件输入 */
        #fileInput {
            display: none;
        }
        
        .highlight-btn {
            background-color: #e74c3c !important;
        }
        
        .highlight-btn:hover {
            background-color: #c0392b !important;
        }
        
        .normal-btn {
            background-color: #3498db !important;
        }
        
        .normal-btn:hover {
            background-color: #2980b9 !important;
        }
    

/* Legend shapes override (circle for containment, square for skill) */
.legend-shape { width: 20px; height: 20px; margin-right: 10px; border: 2px solid #666; background: #ddd; }
body.dark-theme .legend-shape { border-color: #bbb; background: #555; }
.containment-shape { border-radius: 50%; }
.skill-shape { border-radius: 3px; }

/* Sidebar close button (top-right) */
.sidebar-close-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  width: auto !important; /* override global button width:100% */
  padding: 6px 10px;
  background: #e0e0e0;
  color: #333;
  border: 1px solid #ccc;
  border-radius: 4px;
  z-index: 20;
}
.sidebar-close-btn:hover { background: #d5d5d5; }
body.dark-theme .sidebar-close-btn { background: #444; color: #eee; border: 1px solid #666; }
body.dark-theme .sidebar-close-btn:hover { background: #555; }

/* ===== Aesthetic enhancements adapted from newstyles.css (non-breaking overrides) ===== */

/* Light theme gradient background */
body {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #333;
}

/* Preserve dark theme */
body.dark-theme {
  background: #121212;
  color: #e0e0e0;
}

/* Control panel as a card */
.control-panel {
  background: rgba(255, 255, 255, 0.96);
  border-right: 1px solid rgba(0,0,0,0.06);
  box-shadow: 0 10px 30px rgba(0,0,0,0.18);
  backdrop-filter: saturate(120%) blur(2px);
}
body.dark-theme .control-panel {
  background: rgba(40, 40, 40, 0.96);
  border-right: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
}

/* Control group subtle sectioning */
.control-group {
  background: rgba(248,249,250,0.85);
  padding: 12px;
  border-radius: 10px;
  border-left: 4px solid #667eea;
}
body.dark-theme .control-group {
  background: rgba(55,55,55,0.85);
  border-left-color: #5c6bc0;
}

/* Section headings */
.control-group h3 {
  font-weight: 700;
  color: #495057;
}
body.dark-theme .control-group h3 { color: #d0d3d6; }

/* Inputs and selects */
input, select {
  border: 2px solid #e9ecef;
  border-radius: 8px;
  background: #fff;
  transition: all 0.3s ease;
}
input:focus, select:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.15);
}
body.dark-theme input, body.dark-theme select {
  background: #2f2f2f;
  color: #e0e0e0;
  border-color: #444;
}
body.dark-theme input:focus, body.dark-theme select:focus {
  border-color: #7c88ff;
  box-shadow: 0 0 0 3px rgba(124, 136, 255, 0.15);
}

/* Buttons: gradient primary style; keep .normal-btn/.highlight-btn overrides intact */
button {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 10px 12px;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.35);
  transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
}
button:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.45);
  filter: brightness(1.03);
}
.highlight-btn { background-color: #e74c3c !important; box-shadow: 0 4px 15px rgba(231, 76, 60, 0.35) !important; }
.highlight-btn:hover { box-shadow: 0 6px 20px rgba(231, 76, 60, 0.45) !important; }
.normal-btn { background-color: #3498db !important; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.35) !important; }
.normal-btn:hover { box-shadow: 0 6px 20px rgba(52, 152, 219, 0.45) !important; }

/* Toolbar card */
.toolbar {
  background: rgba(255,255,255,0.9);
  border: 1px solid rgba(255,255,255,0.6);
  backdrop-filter: saturate(120%) blur(2px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.18);
}
body.dark-theme .toolbar {
  background: rgba(45,45,45,0.9);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
}

/* Info modal (replace inline styles; still compatible if inline remains) */
.modal-overlay {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: none; /* toggled to flex in JS */
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.45);
  z-index: 20;
}
.modal-content {
  background: #ffffff;
  border-radius: 15px;
  padding: 16px 16px 18px;
  min-width: 280px;
  max-width: 480px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.25);
  position: relative;
}
body.dark-theme .modal-content {
  background: #2e2e2e !important;
  color: #eaeaea !important;
}
/* 强制暗色主题下信息弹窗文本可读 */
body.dark-theme .modal-content h3,
body.dark-theme .modal-content p,
body.dark-theme .modal-content span,
body.dark-theme .modal-content .stat-item {
  color: #e0e0e0 !important;
}
/* 图例块在暗色弹窗内的对比度 */
body.dark-theme .modal-content .legend-shape { border-color: #bbb; background: #555; }

/* Modal header close button (×) */
.modal-close-btn {
  background: none !important;
  border: none !important;
  font-size: 1.4rem;
  line-height: 1;
  color: #6c757d;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease, color 0.2s ease;
}
.modal-close-btn:hover {
  background: #e9ecef;
  color: #495057;
}
body.dark-theme .modal-close-btn {
  color: #c9c9c9;
}
body.dark-theme .modal-close-btn:hover {
  background: #3a3a3a;
  color: #fff;
}

/* Info sections within modal */
.info-section h4 {
  color: #495057;
  font-weight: 700;
}
body.dark-theme .info-section h4 { color: #d0d3d6; }
.legend-combined .legend-item {
  margin-bottom: 10px;
}
.stats-list .stat-item {
  font-size: 14px;
  padding: 6px 0;
  border-bottom: 1px dashed rgba(0,0,0,0.08);
}
.stats-list .stat-item:last-child { border-bottom: none; }
body.dark-theme .stats-list .stat-item { border-bottom-color: rgba(255,255,255,0.08); }

/* Graph container keep full size; optional soft edge for overlays does not affect #cy */
.graph-container {
  border-radius: 14px;
}

/* Toast polish */
.toast {
  border-radius: 10px;
  background: rgba(0,0,0,0.85);
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}

/* Legend chips (used in modal legend) */
.legend-shape { 
  width: 20px; height: 20px; margin-right: 10px; 
  border: 2px solid #666; background: #ddd; 
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.08);
}
body.dark-theme .legend-shape { border-color: #bbb; background: #555; }

/* 右键菜单样式 */
.context-menu {
  position: absolute;
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  padding: 8px 0;
  min-width: 150px;
  z-index: 1000;
  display: none;
}

body.dark-theme .context-menu {
  background: rgba(45, 45, 45, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.context-menu-item {
  display: block;
  width: 100%;
  padding: 8px 16px;
  background: none;
  border: none;
  text-align: left;
  cursor: pointer;
  font-size: 14px;
  color: #333;
  transition: background-color 0.2s;
}

body.dark-theme .context-menu-item {
  color: #e0e0e0;
}

.context-menu-item:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

body.dark-theme .context-menu-item:hover {
  background-color: rgba(255, 255, 255, 0.1);
}


/* ==== Dark theme overrides: overlay forms ==== */

/* Overlay forms created by inlined.js (class="overlay-card") */
.overlay-card {
  background: rgba(255,255,255,0.98) !important;
  color: #333 !important;
}
body.dark-theme .overlay-card {
  background: #2e2e2e !important;
  color: #e0e0e0 !important;
  border: 1px solid rgba(255,255,255,0.08);
}
body.dark-theme .overlay-card label { color: #e0e0e0 !important; }
body.dark-theme .overlay-card input,
body.dark-theme .overlay-card select {
  background: #2f2f2f !important;
  color: #e0e0e0 !important;
  border-color: #444 !important;
}
body.dark-theme .overlay-card .modal-close-btn {
  color: #c9c9c9;
}
body.dark-theme .overlay-card .modal-close-btn:hover {
  background: #3a3a3a;
  color: #fff;
}

/* ==== Dark theme: toast and undo banner visibility ==== */
body.dark-theme .toast {
  background: rgba(0,0,0,0.9) !important;
  color: #fff !important;
  border: 1px solid rgba(255,255,255,0.1);
}
body.dark-theme #undoBanner {
  background: #2e2e2e !important;
  color: #e0e0e0 !important;
  border: 1px solid #666 !important;
}
body.dark-theme #undoBanner button {
  background: #444 !important;
  color: #eee !important;
  border: 1px solid #666 !important;
  border-radius: 6px;
  padding: 4px 8px;
}
