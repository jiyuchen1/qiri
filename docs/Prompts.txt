目标
- 继续优化项目的界面与交互体验，使配置“收容物（异常物）”与“技能”的流程高效、直观、可校验
- 在不修改初始化文件 data.json 的前提下，完善数据配置后支持一键导出独立 JSON 文件（包含收容物与技能的数据），用于部署或备份
界面与交互要求
- 信息架构
  - 顶层导航：收容物、技能、数据导出
  - 子页面：列表页、详情/编辑页、新建页
- 列表页
  - 搜索：支持按名称搜索（前缀/模糊）
  - 筛选与排序：按技能品质、冷却时间范围、创建时间排序等
  - 分页或增量加载；>1000 条时支持虚拟列表或分段加载
  - 批量操作：批量删除、批量导出选中项（可选）
- 详情/编辑页
  - 收容物字段：名称（必填、唯一）、关联技能（多选）；可显示只读的ID
  - 技能字段：名称（必填、唯一）、效果（必填）、品质（必填）、冷却时间（必填）
  - 关联管理：在收容物编辑页支持搜索选择技能；支持“就地新建技能并自动关联”
  - 表单校验：实时校验与提交校验，错误提示清晰、可聚焦
  - 删除安全：删除技能时若被收容物使用，需弹出确认并列出受影响的收容物；支持取消
- 通用交互
  - 未保存变更提示：离开页面/切换路由时询问
  - 成功/失败反馈：统一的 Toast/Snackbar；错误包含原因
  - 键盘可用性：Tab 序、Enter 提交、Esc 关闭对话框
  - 可访问性：表单关联label、ARIA属性、对比度达标
  - 响应式布局：≥320px 手机到桌面均良好显示
  - 国际化：文案抽离，至少支持中文，保留扩展英文的能力

数据模型与约束
- 统一标识
  - 每个收容物与技能均有稳定的字符串ID（如 an_xxx、sk_xxx），用于关联与导出
- 收容物（必填字段）
  - id: string（只读/自动生成）
  - name: string（1–64 字；唯一，不区分大小写）
  - skillIds: string[]（引用技能ID，允许为空但引导添加）
- 技能（必填字段）
  - id: string（只读/自动生成）
  - name: string（1–64 字；唯一，不区分大小写）
  - effect: string（1–500 字；支持多行文本；XSS 过滤显示）
  - quality: enum（默认枚举：普通、稀有、史诗、传说；支持配置扩展但导出需为字符串）
  - cooldown: integer（单位：秒；0–86400；仅整数，非负）
- 通用约束
  - 名称唯一性：同类实体内不得重复
  - 字段安全：过滤HTML/script，防注入；前后端一致校验
  - 变更保护：删除技能前检查引用；删除收容物不影响技能

导出功能规范（核心）
- 行为
  - 导出入口：单独的“数据导出”页面与工具栏按钮
  - 导出范围：默认导出全部数据（收容物与技能）；可选项：仅导出变更项（相对 data.json 的差异，若可用）
  - 预览：导出前可查看JSON预览与记录数
  - 文件名：anomalies-skills-YYYYMMDD-HHmmss.json（本地下载）；绝不覆盖 data.json
- JSON 顶层结构（示例）
  {
    "schemaVersion": "1.0.0",
    "generatedAt": "2025-11-08T12:34:56Z",
    "appVersion": "1.0.0",
    "skills": [
      {
        "id": "sk_0001",
        "name": "时间凝滞",
        "effect": "使目标在5秒内行动减缓50%。",
        "quality": "史诗",
        "cooldown": 30
      }
    ],
    "anomalies": [
      {
        "id": "an_0001",
        "name": "黑曜石棱镜",
        "skillIds": ["sk_0001"]
      }
    ]
  }
- JSON 规则
  - schemaVersion：语义化版本号，随字段变更递增
  - generatedAt：UTC ISO 8601
  - appVersion：应用版本（可选）
  - 数组顺序：按名称升序或创建时间升序，保持稳定
  - 字符串UTF-8，无BOM
- 可选导出选项
  - 是否包含ID（若不包含，则以名称关联；默认包含ID）
  - 是否压缩（去空格/换行）或美化（2空格缩进；默认美化）
  - 是否仅导出选中项（来自列表选择）
- 成功与失败
  - 成功：显示文件大小、条目数、保存路径/下载提示
  - 失败：显示原因（校验失败、权限、序列化错误），提供重试

数据持久化与初始化
- 初始化
  - 首次加载从 data.json 读取初始数据至内存或本地存储
  - 严禁在任何情形下直接写回或覆盖 data.json
- 持久化
  - 运行期变更可存储于本地存储/IndexedDB/后端API（依据项目架构），并可在导出时聚合
  - 当存在未导出的变更时，显著提示用户导出

校验与错误处理
- 前端校验：必填、枚举、唯一性、长度、数值范围
- 导出前二次校验：孤儿引用（skillIds 必须存在）、重复名称、非法字符
- 友好错误：明确字段、期望值与实际值；提供一键定位问题项

性能与质量
- 中等数据量（~5k 技能、~5k 收容物）下交互流畅
- 操作耗时 >300ms 提供进度提示
- 单元测试覆盖核心校验与导出函数；提供至少一组端到端用例

可扩展性
- 品质枚举可通过配置扩展，但导出仍为字符串值
- 允许为收容物和技能增添可选字段（如描述、标签、创建时间等），但导出保持与 schemaVersion 一致
- 保留导入功能的扩展点（未来可从导出的JSON进行回导）

交付与验收标准
- 可创建/编辑/删除收容物与技能，并能在收容物中关联多个技能
- 名称唯一、冷却时间与品质校验生效；删除引用项有拦截提示
- data.json 未被任何写操作修改
- 成功导出文件，结构与示例一致；导入校验通过（如实现）
- UI 响应式且可访问，错误提示明确；文档包含使用说明与导出字段说明